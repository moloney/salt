name: Build Salt Packages

on:
  workflow_call:
    inputs:
      environment:
        type: string
        description: On which GitHub Environment Context To Run
      salt-version:
        type: string
        required: true
        description: The Salt version to set prior to building packages.
      dev-build:
        type: boolean
        default: false
      artifacts_run_id:
        type: string
        required: true
      artifacts_run_number:
        type: string
        required: true
    secrets:
      FOO:
        required: true
      SECRETS_KEY:
        required: true

jobs:
  build:
    name: Build DEB Repositories
    uses: ./.github/workflows/build-deb-repo.yml
    with:
      environment: ${{ inputs.environment }}
      salt-version: "${{ inputs.salt-version }}"
      dev-build: ${{ inputs.dev-build }}
      key-id: "37A710479D30D7B6"
      artifacts_run_id: ${{ inputs.artifacts_run_id }}
      artifacts_run_number: ${{ inputs.artifacts_run_number }}
    secrets:
      FOO: ${{ secrets.FOO }}
      SECRETS_KEY: ${{ secrets.SECRETS_KEY }}
